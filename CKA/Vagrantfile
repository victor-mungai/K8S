Vagrant.configure("2") do |config|
  # Base Image: Ubuntu 24.04 LTS
  config.vm.box = "bento/ubuntu-24.04"
  config.vm.define "cp-node" do |cp|
    cp.vm.hostname = "cp-node"
    cp.vm.network "private_network", ip: "192.168.56.10"
    cp.vm.provider "virtualbox" do |vb|
      vb.cpus = 2        # Kubeadm requires minimum 2 CPUs
      vb.memory = 2048   # Minimum 2GB RAM
    end
  end

  # 2. Worker Node
  config.vm.define "worker-node" do |worker|
    worker.vm.hostname = "worker-node"
    worker.vm.network "private_network", ip: "192.168.56.11"
    worker.vm.provider "virtualbox" do |vb|
      vb.cpus = 1
      vb.memory = 1536
    end
  end

  # Optional: Universal prep (No K8s install, just basics)
  config.vm.provision "shell", inline: <<-SHELL
    apt-get update -qq
    apt-get install -y -qq apt-transport-https ca-certificates curl gnupg
  SHELL
end
